<renderer name="" cx="-1" cy="-1">
  <images>
    <image name="Original.Image" cx="-1" cy="-1" format="R16G16B16A16"/>
    <image name="AlbedoAlpha.Image" cx="-1" cy="-1" format="R8G8B8A8"/>
    <image name="NormalHeight.Image" cx="-1" cy="-1" format="R8G8B8A8"/>
    <image name="SpecRoughness.Image" cx="-1" cy="-1" format="R8G8B8A8"/>
  </images>
  
  <pipelines>
    <pipeline1 file_name="pipeline/sky/panorama.xml"/>
    <pipeline file_name="pipeline/deferred/mrt.xml"/>
    <pipeline file_name="pipeline/deferred/mrt_anim.xml"/>
    <pipeline file_name="pipeline/deferred/deferred.xml"/>
    <pipeline file_name="pipeline/combine/combine.xml"/>
  </pipelines>
  
	<passes>
		<pass type="draw_action" name="sky">
			<attachments>
        <attachment name="1" image_name="Original.Image" aspect="color" />
			</attachments>
			<actions>
				<action name="1" type="draw_action" pipeline_name="Panorama.Pipeline" vertex_buffer_name="Static.VertexBuffer" index_buffer_name="Static.IndexBuffer">
					<drawcalls>
						<drawcall name="1" instance_count="1" first_instance="0" type="index" model_name="Sphere.Model"/>
					</drawcalls>
				</action>
			</actions>
		</pass>
    <pass type="draw_action" name="mrt">
      <attachments>
        <attachment name="1" image_name="AlbedoAlpha.Image" aspect="color" clear="true"/>
        <attachment name="2" image_name="NormalHeight.Image" aspect="color" clear="true"/>
        <attachment name="2" image_name="SpecRoughness.Image" aspect="color" clear="true"/>
        <attachment name="3" image_name="Depth.Image" aspect="depth" clear="true"/>
      </attachments>
      <actions>
        <action name="1" type="draw_action" pipeline_name="Mrt.Pipeline" vertex_buffer_name="Static.VertexBuffer" index_buffer_name="Static.IndexBuffer">
          <drawcalls>
            <drawcall name="1" instance_count="1" first_instance="0" type="indirect_index" indirect_index_buffer_name="Scene.Static.IndirectBuffer" indirect_count_name="Scene.Static.IndirectCount"/>
          </drawcalls>
        </action>
        <action name="2" type="draw_action" pipeline_name="Mrt_Anim.Pipeline" vertex_buffer_name="Animated.VertexBuffer" index_buffer_name="Animated.IndexBuffer">
          <drawcalls>
            <drawcall name="1" instance_count="1" first_instance="0" type="indirect_index" indirect_index_buffer_name="Scene.Animated.IndirectBuffer" indirect_count_name="Scene.Animated.IndirectCount"/>
          </drawcalls>
        </action>
      </actions>
    </pass>
    <pass type="draw_action" name="deferred">
      <attachments>
        <attachment name="1" image_name="Original.Image" aspect="color" />
      </attachments>
      <dependencies>
        <dependency pass_name="sky"/>
        <dependency pass_name="mrt"/>
      </dependencies>
      <actions>
        <action name="1" type="draw_action" pipeline_name="Deferred.Pipeline">
          <drawcalls>
            <drawcall name="1" instance_count="1" first_instance="0" type="vertex" vertex_count="3"/>
          </drawcalls>
        </action>
      </actions>
    </pass>
    <pass type="draw_action" name="combine">
      <attachments>
        <attachment name="1" image_name="Window.Image" aspect="color" />
      </attachments>
      <dependencies>
        <dependency pass_name="deferred"/>
      </dependencies>
      <actions>
        <action name="1" type="draw_action" pipeline_name="Combine.Pipeline">
          <drawcalls>
            <drawcall name="1" instance_count="1" first_instance="0" type="vertex" vertex_count="3"/>
          </drawcalls>
        </action>
      </actions>
    </pass>
	</passes>
</renderer>
